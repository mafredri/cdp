// Code generated by cdpgen. DO NOT EDIT.

package internal

import (
	"encoding/json"
	"errors"
	"time"
)

// NetworkTimeSinceEpoch UTC time in seconds, counted from January 1, 1970.
//
// This type cannot be used directly. Use network.TimeSinceEpoch instead.
type NetworkTimeSinceEpoch float64

// String calls (time.Time).String().
func (t NetworkTimeSinceEpoch) String() string {
	return t.Time().String()
}

// Time parses the Unix time.
func (t NetworkTimeSinceEpoch) Time() time.Time {
	ts := float64(t) / 1
	secs := int64(ts)
	nsecs := int64((ts - float64(secs)) * 1000000000)
	return time.Unix(secs, nsecs)
}

// MarshalJSON implements json.Marshaler. Encodes to null if t is zero.
func (t NetworkTimeSinceEpoch) MarshalJSON() ([]byte, error) {
	if t == 0 {
		return []byte("null"), nil
	}
	f := float64(t)
	return json.Marshal(&f)
}

// UnmarshalJSON implements json.Unmarshaler.
func (t *NetworkTimeSinceEpoch) UnmarshalJSON(data []byte) error {
	*t = 0
	if len(data) == 0 {
		return nil
	}
	var f float64
	if err := json.Unmarshal(data, &f); err != nil {
		return errors.New("internal.NetworkTimeSinceEpoch: " + err.Error())
	}
	*t = NetworkTimeSinceEpoch(f)
	return nil
}

var _ json.Marshaler = (*NetworkTimeSinceEpoch)(nil)
var _ json.Unmarshaler = (*NetworkTimeSinceEpoch)(nil)
